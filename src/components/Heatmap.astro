---
import { getFirstDayOfWeek } from "../utils/dates";
import Day from "./Day.tsx";

const weeks = Array.from({ length: 52 }).map((_, weekDiff) => {
  // Get the day of the week involved
  const day = new Date();
  day.setDate(day.getDate() - weekDiff * 7);
  // Get the first day of the week
  const firtDayOfWeek = getFirstDayOfWeek(day, true);

  return Array.from({ length: 7 }).map((_, dayDiff) => {
    const date = new Date(firtDayOfWeek.getTime());
    date.setDate(date.getDate() + dayDiff);

    return {
      date,
      selected: Math.random() < 0.5,
    };
  });
});
---

<div
  class="p-1 w-full overflow-y-auto inline-grid grid-rows-7 grid-flow-col gap-1"
  dir="rtl"
>
  {
    weeks.map((week) =>
      week.map((day) => (
        <Day date={day.date} selected={day.selected} client:visible />
      ))
    )
  }
</div>
